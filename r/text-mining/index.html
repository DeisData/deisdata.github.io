<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex/" /><link rel="search" title="Search" href="../../search/" /><link rel="next" title="Machine learning" href="../../machine-learning/" /><link rel="prev" title="Data Analysis" href="../data-analysis/" />

    <link rel="shortcut icon" href="../../_static/favicon-32x32.png"/><!-- Generated with Sphinx 7.1.2 and Furo 2024.08.06 -->
        <title>Text Mining with R - DeisData</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=934bd528" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../"><div class="brand">DeisData</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/DeisDatax1x_medium.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">DeisData</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search/" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../python/">Python</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Python</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../python/setup-install/">Setup and installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/jupyter/">Jupyter notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/python-fundamentals/">Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/data-structures/">Data structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/conditionals/">Booleans and conditionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/loops/">Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/numpy/">NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/pandas/">Pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/figures/">Matplotlib and seaborn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/functions/">Writing functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/stats/">Statistical tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/webscraping/">Web scraping</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../">R</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of R</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../quick-start/">Intro to R and the Tidyverse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data-wrangling/">Data wrangling with the Tidyverse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data-visualization/">ggplot2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data-analysis/">Data Analysis</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Text mining</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../machine-learning/">Machine learning</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Machine learning</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../machine-learning/quick-start/">Quick start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../machine-learning/image-recognition1/">Image recognition: Model components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../machine-learning/image-recognition2/">Image recognition: Improving the model</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../shell/">Unix Shell</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Unix Shell</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../shell/setup/">Bash Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/navigating/">Navigating</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/alter-dir/">Altering files and directories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/pipes-filters/">Pipes and filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/loops/">Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/shell-scripts/">Shell scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/search-find/">Searching and finding</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../git/">Git Version Control</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Git Version Control</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../git/setup-install/">Setup and installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../git/quick-start/">Quick start to Git and GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../git/pushing/">Pushing changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../git/fetch-merge/">Fetch and merge from GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../git/git-utilities/">Git utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../git/forking/">Forking in GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../git/glossary/">Git Glossary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../sql/">SQL</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of SQL</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../sql/setup/">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/selecting-data/">Selecting data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/sorting-duplicates/">Sorting out and removing duplicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/filtering/">Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/calculating/">Calculating new values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/missing-data/">Missing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/aggregates/">Aggregates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/combining-data/">Combining data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/create-modify/">Create and modify</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/glossary/">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../case-studies/">Data Services Case Studies</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../contribute/">Contribute to DeisData</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Contribute to DeisData</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/small-changes/">Small changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/rst-intro/">reStructuredText basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/structural-changes/">Structural changes</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/r/text-mining.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="text-mining-with-r">
<h1>Text Mining with R<a class="headerlink" href="#text-mining-with-r" title="Permalink to this heading">¶</a></h1>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this heading">¶</a></h2>
<section id="install-and-load-packages">
<h3>Install and load packages<a class="headerlink" href="#install-and-load-packages" title="Permalink to this heading">¶</a></h3>
<p>We will be using several external libraries to do our text analysis.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;readtext&quot;</span><span class="p">)</span>
<span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;quanteda&quot;</span><span class="p">)</span>
<span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;quanteda.textmodels&quot;</span><span class="p">)</span>
<span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;quanteda.textstats&quot;</span><span class="p">)</span>
<span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;quanteda.textplots&quot;</span><span class="p">)</span>
<span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;tidyverse&quot;</span><span class="p">)</span>

<span class="nf">library</span><span class="p">(</span><span class="n">readtext</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">quanteda</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">quanteda.textmodels</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">quanteda.textstats</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">quanteda.textplots</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="import-data">
<h3>Import data<a class="headerlink" href="#import-data" title="Permalink to this heading">¶</a></h3>
<p>We are going to analyze the State of the Union Addresses from 1934 to
2020. First, set your working directory to the location of your files.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">setwd</span><span class="p">(</span><span class="s">&#39;~/Documents/Workshops/TM2023/&#39;</span><span class="p">)</span><span class="w"> </span><span class="c1"># replace with the appropriate directory</span>
<span class="n">sotu</span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">readtext </span><span class="p">(</span><span class="s">&quot;texts&quot;</span><span class="p">)</span>
<span class="n">sotu</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>readtext object consisting of 96 documents and 0 docvars.
# Description: df [96 × 2]
doc_id                text
&lt;chr&gt;                 &lt;chr&gt;
1 barack-obama-2009.txt &quot;\&quot;Madam Spea\&quot;...&quot;
2 barack-obama-2010.txt &quot;\&quot;Madam Spea\&quot;...&quot;
3 barack-obama-2011.txt &quot;\&quot;Mr. Speake\&quot;...&quot;
4 barack-obama-2012.txt &quot;\&quot;Mr. Speake\&quot;...&quot;
5 barack-obama-2013.txt &quot;\&quot;Please, ev\&quot;...&quot;
6 barack-obama-2014.txt &quot;\&quot;The Presid\&quot;...&quot;
# … with 90 more rows
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="create-a-corpus">
<h2>Create a corpus<a class="headerlink" href="#create-a-corpus" title="Permalink to this heading">¶</a></h2>
<p>A corpus is a structure for text analysis that retains the position of
the words.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sotu_corp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">corpus</span><span class="p">(</span><span class="n">sotu</span><span class="p">)</span>
<span class="n">sotu_corp</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Corpus consisting of 96 documents.
barack-obama-2009.txt :
&quot;Madam Speaker, Mr. Vice President, Members of Congress, the ...&quot;

barack-obama-2010.txt :
&quot;Madam Speaker, Vice President Biden, Members of Congress, di...&quot;

barack-obama-2011.txt :
&quot;Mr. Speaker, Mr. Vice President, Members of Congress, distin...&quot;

barack-obama-2012.txt :
&quot;Mr. Speaker, Mr. Vice President, Members of Congress, distin...&quot;

barack-obama-2013.txt :
&quot;Please, everybody, have a seat. Mr. Speaker, Mr. Vice Presid...&quot;

barack-obama-2014.txt :
&quot;The President. Mr. Speaker, Mr. Vice President, Members of C...&quot;

[ reached max_ndoc ... 90 more documents ]
</pre></div>
</div>
</div>
</div>
<p>Let’s take a look at a few statistics describing the corpus.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--9-input--1" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ndoc</span><span class="p">(</span><span class="n">sotu_corp</span><span class="p">)</span><span class="w"> </span><span class="c1"># document count</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--9-input--2" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[1] 96
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--8-input--1" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">docnames</span><span class="p">(</span><span class="n">sotu_corp</span><span class="p">)</span><span class="w"> </span><span class="c1"># unique document identifiers</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--8-input--2" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> [1] &quot;barack-obama-2009.txt&quot;          &quot;barack-obama-2010.txt&quot;
 [3] &quot;barack-obama-2011.txt&quot;          &quot;barack-obama-2012.txt&quot;
 [5] &quot;barack-obama-2013.txt&quot;          &quot;barack-obama-2014.txt&quot;
 [7] &quot;barack-obama-2015.txt&quot;          &quot;barack-obama-2016.txt&quot;
 [9] &quot;donald-trump-2017.txt&quot;          &quot;donald-trump-2018.txt&quot;
[11] &quot;donald-trump-2019.txt&quot;          &quot;donald-trump-2020.txt&quot;
[13] &quot;dwight-d-eisenhower-1953.txt&quot;   &quot;dwight-d-eisenhower-1954.txt&quot;
[15] &quot;dwight-d-eisenhower-1955.txt&quot;   &quot;dwight-d-eisenhower-1956a.txt&quot;
[17] &quot;dwight-d-eisenhower-1956b.txt&quot;  &quot;dwight-d-eisenhower-1957.txt&quot;
[19] &quot;dwight-d-eisenhower-1958.txt&quot;   &quot;dwight-d-eisenhower-1959.txt&quot;
[21] &quot;dwight-d-eisenhower-1960.txt&quot;   &quot;dwight-d-eisenhower-1961.txt&quot;
[23] &quot;franklin-d-roosevelt-1934.txt&quot;  &quot;franklin-d-roosevelt-1935.txt&quot;
[25] &quot;franklin-d-roosevelt-1936.txt&quot;  &quot;franklin-d-roosevelt-1937.txt&quot;
[27] &quot;franklin-d-roosevelt-1938.txt&quot;  &quot;franklin-d-roosevelt-1939.txt&quot;
[29] &quot;franklin-d-roosevelt-1940.txt&quot;  &quot;franklin-d-roosevelt-1941.txt&quot;
[31] &quot;franklin-d-roosevelt-1942.txt&quot;  &quot;franklin-d-roosevelt-1943.txt&quot;
[33] &quot;franklin-d-roosevelt-1944.txt&quot;  &quot;franklin-d-roosevelt-1945a.txt&quot;
[35] &quot;franklin-d-roosevelt-1945b.txt&quot; &quot;george-bush-1989.txt&quot;
[37] &quot;george-bush-1990.txt&quot;           &quot;george-bush-1991.txt&quot;
[39] &quot;george-bush-1992.txt&quot;           &quot;george-w-bush-2001.txt&quot;
[41] &quot;george-w-bush-2002.txt&quot;         &quot;george-w-bush-2003.txt&quot;
[43] &quot;george-w-bush-2004.txt&quot;         &quot;george-w-bush-2005.txt&quot;
[45] &quot;george-w-bush-2006.txt&quot;         &quot;george-w-bush-2007.txt&quot;
[47] &quot;george-w-bush-2008.txt&quot;         &quot;gerald-r-ford-1975.txt&quot;
[49] &quot;gerald-r-ford-1976.txt&quot;         &quot;gerald-r-ford-1977.txt&quot;
[51] &quot;harry-s-truman-1946.txt&quot;        &quot;harry-s-truman-1947.txt&quot;
[53] &quot;harry-s-truman-1948.txt&quot;        &quot;harry-s-truman-1949.txt&quot;
[55] &quot;harry-s-truman-1950.txt&quot;        &quot;harry-s-truman-1951.txt&quot;
[57] &quot;harry-s-truman-1952.txt&quot;        &quot;harry-s-truman-1953.txt&quot;
[59] &quot;jimmy-carter-1978a.txt&quot;         &quot;jimmy-carter-1978b.txt&quot;
[61] &quot;jimmy-carter-1979a.txt&quot;         &quot;jimmy-carter-1979b.txt&quot;
[63] &quot;jimmy-carter-1980a.txt&quot;         &quot;jimmy-carter-1980b.txt&quot;
[65] &quot;jimmy-carter-1981.txt&quot;          &quot;john-f-kennedy-1961.txt&quot;
[67] &quot;john-f-kennedy-1962.txt&quot;        &quot;john-f-kennedy-1963.txt&quot;
[69] &quot;lyndon-b-johnson-1964.txt&quot;      &quot;lyndon-b-johnson-1965.txt&quot;
[71] &quot;lyndon-b-johnson-1966.txt&quot;      &quot;lyndon-b-johnson-1967.txt&quot;
[73] &quot;lyndon-b-johnson-1968.txt&quot;      &quot;lyndon-b-johnson-1969.txt&quot;
[75] &quot;richard-m-nixon-1970.txt&quot;       &quot;richard-m-nixon-1971.txt&quot;
[77] &quot;richard-m-nixon-1972a.txt&quot;      &quot;richard-m-nixon-1972b.txt&quot;
[79] &quot;richard-m-nixon-1974a.txt&quot;      &quot;richard-m-nixon-1974b.txt&quot;
[81] &quot;ronald-reagan-1981.txt&quot;         &quot;ronald-reagan-1982.txt&quot;
[83] &quot;ronald-reagan-1983.txt&quot;         &quot;ronald-reagan-1984.txt&quot;
[85] &quot;ronald-reagan-1985.txt&quot;         &quot;ronald-reagan-1986.txt&quot;
[87] &quot;ronald-reagan-1987.txt&quot;         &quot;ronald-reagan-1988.txt&quot;
[89] &quot;william-j-clinton-1993.txt&quot;     &quot;william-j-clinton-1994.txt&quot;
[91] &quot;william-j-clinton-1995.txt&quot;     &quot;william-j-clinton-1996.txt&quot;
[93] &quot;william-j-clinton-1997.txt&quot;     &quot;william-j-clinton-1998.txt&quot;
[95] &quot;william-j-clinton-1999.txt&quot;     &quot;william-j-clinton-2000.txt&quot;
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--7-input--1" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ntoken</span><span class="p">(</span><span class="n">sotu_corp</span><span class="p">)</span><span class="w"> </span><span class="c1"># tokens in each document</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--7-input--2" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>         barack-obama-2009.txt          barack-obama-2010.txt
                          6743                           8151
         barack-obama-2011.txt          barack-obama-2012.txt
                          7741                           7836
         barack-obama-2013.txt          barack-obama-2014.txt
                          7580                           7908
         barack-obama-2015.txt          barack-obama-2016.txt
                          7622                           6837
         donald-trump-2017.txt          donald-trump-2018.txt
                          5702                           5865
         donald-trump-2019.txt          donald-trump-2020.txt
                          5895                           7145
  dwight-d-eisenhower-1953.txt   dwight-d-eisenhower-1954.txt
                          7704                           6596
  dwight-d-eisenhower-1955.txt  dwight-d-eisenhower-1956a.txt
                          8039                           1192
 dwight-d-eisenhower-1956b.txt   dwight-d-eisenhower-1957.txt
                          9070                           4562
  dwight-d-eisenhower-1958.txt   dwight-d-eisenhower-1959.txt
                          5487                           5482
  dwight-d-eisenhower-1960.txt   dwight-d-eisenhower-1961.txt
                          6241                           6865
 franklin-d-roosevelt-1934.txt  franklin-d-roosevelt-1935.txt
                          2422                           3857
 franklin-d-roosevelt-1936.txt  franklin-d-roosevelt-1937.txt
                          4251                           2977
 franklin-d-roosevelt-1938.txt  franklin-d-roosevelt-1939.txt
                          5117                           4165
 franklin-d-roosevelt-1940.txt  franklin-d-roosevelt-1941.txt
                          3511                           3658
 franklin-d-roosevelt-1942.txt  franklin-d-roosevelt-1943.txt
                          3912                           5071
 franklin-d-roosevelt-1944.txt franklin-d-roosevelt-1945a.txt
                          4219                           3441
franklin-d-roosevelt-1945b.txt           george-bush-1989.txt
                          8895                           5474
          george-bush-1990.txt           george-bush-1991.txt
                          4312                           4481
          george-bush-1992.txt         george-w-bush-2001.txt
                          5771                           4927
        george-w-bush-2002.txt         george-w-bush-2003.txt
                          4323                           6028
        george-w-bush-2004.txt         george-w-bush-2005.txt
                          5790                           5628
        george-w-bush-2006.txt         george-w-bush-2007.txt
                          5908                           6161
        george-w-bush-2008.txt         gerald-r-ford-1975.txt
                          6345                           4621
        gerald-r-ford-1976.txt         gerald-r-ford-1977.txt
                          5505                           5246
       harry-s-truman-1946.txt        harry-s-truman-1947.txt
                         30890                           6619
       harry-s-truman-1948.txt        harry-s-truman-1949.txt
                          5575                           3764
       harry-s-truman-1950.txt        harry-s-truman-1951.txt
                          5588                           4415
       harry-s-truman-1952.txt        harry-s-truman-1953.txt
                          5919                          10869
        jimmy-carter-1978a.txt         jimmy-carter-1978b.txt
                          5051                          13225
        jimmy-carter-1979a.txt         jimmy-carter-1979b.txt
                          3639                          23426
        jimmy-carter-1980a.txt         jimmy-carter-1980b.txt
                          3801                          36401
         jimmy-carter-1981.txt        john-f-kennedy-1961.txt
                         36774                           5835
       john-f-kennedy-1962.txt        john-f-kennedy-1963.txt
                          7419                           6040
     lyndon-b-johnson-1964.txt      lyndon-b-johnson-1965.txt
                          3603                           4895
     lyndon-b-johnson-1966.txt      lyndon-b-johnson-1967.txt
                          6174                           8024
     lyndon-b-johnson-1968.txt      lyndon-b-johnson-1969.txt
                          5524                           4605
      richard-m-nixon-1970.txt       richard-m-nixon-1971.txt
                          4934                           4971
     richard-m-nixon-1972a.txt      richard-m-nixon-1972b.txt
                          4424                          18979
     richard-m-nixon-1974a.txt      richard-m-nixon-1974b.txt
                          5690                          24507
        ronald-reagan-1981.txt         ronald-reagan-1982.txt
                          4920                           5765
        ronald-reagan-1983.txt         ronald-reagan-1984.txt
                          6156                           5563
        ronald-reagan-1985.txt         ronald-reagan-1986.txt
                          4725                           3904
        ronald-reagan-1987.txt         ronald-reagan-1988.txt
                          4286                           5402
    william-j-clinton-1993.txt     william-j-clinton-1994.txt
                          7698                           8285
    william-j-clinton-1995.txt     william-j-clinton-1996.txt
                         10203                           7038
    william-j-clinton-1997.txt     william-j-clinton-1998.txt
                          7548                           8202
    william-j-clinton-1999.txt     william-j-clinton-2000.txt
                          8436                          10222
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ntype</span><span class="p">(</span><span class="n">sotu_corp</span><span class="p">)</span><span class="w"> </span><span class="c1"># types (unique tokens) in each document</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>         barack-obama-2009.txt          barack-obama-2010.txt
                          1587                           1844
         barack-obama-2011.txt          barack-obama-2012.txt
                          1832                           1889
         barack-obama-2013.txt          barack-obama-2014.txt
                          1865                           1971
         barack-obama-2015.txt          barack-obama-2016.txt
                          1828                           1723
         donald-trump-2017.txt          donald-trump-2018.txt
                          1574                           1716
         donald-trump-2019.txt          donald-trump-2020.txt
                          1742                           1961
  dwight-d-eisenhower-1953.txt   dwight-d-eisenhower-1954.txt
                          1930                           1788
  dwight-d-eisenhower-1955.txt  dwight-d-eisenhower-1956a.txt
                          1948                            453
 dwight-d-eisenhower-1956b.txt   dwight-d-eisenhower-1957.txt
                          2167                           1374
  dwight-d-eisenhower-1958.txt   dwight-d-eisenhower-1959.txt
                          1533                           1624
  dwight-d-eisenhower-1960.txt   dwight-d-eisenhower-1961.txt
                          1818                           2042
 franklin-d-roosevelt-1934.txt  franklin-d-roosevelt-1935.txt
                           858                           1145
 franklin-d-roosevelt-1936.txt  franklin-d-roosevelt-1937.txt
                          1215                            987
 franklin-d-roosevelt-1938.txt  franklin-d-roosevelt-1939.txt
                          1369                           1225
 franklin-d-roosevelt-1940.txt  franklin-d-roosevelt-1941.txt
                          1050                           1100
 franklin-d-roosevelt-1942.txt  franklin-d-roosevelt-1943.txt
                          1116                           1388
 franklin-d-roosevelt-1944.txt franklin-d-roosevelt-1945a.txt
                          1234                           1035
franklin-d-roosevelt-1945b.txt           george-bush-1989.txt
                          2084                           1505
          george-bush-1990.txt           george-bush-1991.txt
                          1206                           1302
          george-bush-1992.txt         george-w-bush-2001.txt
                          1497                           1298
        george-w-bush-2002.txt         george-w-bush-2003.txt
                          1333                           1661
        george-w-bush-2004.txt         george-w-bush-2005.txt
                          1579                           1576
        george-w-bush-2006.txt         george-w-bush-2007.txt
                          1642                           1689
        george-w-bush-2008.txt         gerald-r-ford-1975.txt
                          1694                           1327
        gerald-r-ford-1976.txt         gerald-r-ford-1977.txt
                          1487                           1478
       harry-s-truman-1946.txt        harry-s-truman-1947.txt
                          3956                           1652
       harry-s-truman-1948.txt        harry-s-truman-1949.txt
                          1379                           1122
       harry-s-truman-1950.txt        harry-s-truman-1951.txt
                          1336                           1070
       harry-s-truman-1952.txt        harry-s-truman-1953.txt
                          1381                           2190
        jimmy-carter-1978a.txt         jimmy-carter-1978b.txt
                          1340                           2728
        jimmy-carter-1979a.txt         jimmy-carter-1979b.txt
                          1071                           3710
        jimmy-carter-1980a.txt         jimmy-carter-1980b.txt
                          1070                           4858
         jimmy-carter-1981.txt        john-f-kennedy-1961.txt
                          5188                           1714
       john-f-kennedy-1962.txt        john-f-kennedy-1963.txt
                          2047                           1677
     lyndon-b-johnson-1964.txt      lyndon-b-johnson-1965.txt
                          1103                           1344
     lyndon-b-johnson-1966.txt      lyndon-b-johnson-1967.txt
                          1500                           1842
     lyndon-b-johnson-1968.txt      lyndon-b-johnson-1969.txt
                          1440                           1208
      richard-m-nixon-1970.txt       richard-m-nixon-1971.txt
                          1270                           1149
     richard-m-nixon-1972a.txt      richard-m-nixon-1972b.txt
                          1164                           3286
     richard-m-nixon-1974a.txt      richard-m-nixon-1974b.txt
                          1267                           3815
        ronald-reagan-1981.txt         ronald-reagan-1982.txt
                          1382                           1608
        ronald-reagan-1983.txt         ronald-reagan-1984.txt
                          1681                           1612
        ronald-reagan-1985.txt         ronald-reagan-1986.txt
                          1478                           1260
        ronald-reagan-1987.txt         ronald-reagan-1988.txt
                          1343                           1506
    william-j-clinton-1993.txt     william-j-clinton-1994.txt
                          1564                           1767
    william-j-clinton-1995.txt     william-j-clinton-1996.txt
                          1939                           1584
    william-j-clinton-1997.txt     william-j-clinton-1998.txt
                          1719                           1964
    william-j-clinton-1999.txt     william-j-clinton-2000.txt
                          1932                           2113
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">nsentence</span><span class="p">(</span><span class="n">sotu_corp</span><span class="p">)</span><span class="w"> </span><span class="c1"># sentences in each document</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>         barack-obama-2009.txt          barack-obama-2010.txt
                           286                            419
         barack-obama-2011.txt          barack-obama-2012.txt
                           395                            415
         barack-obama-2013.txt          barack-obama-2014.txt
                           361                            376
         barack-obama-2015.txt          barack-obama-2016.txt
                           376                            360
         donald-trump-2017.txt          donald-trump-2018.txt
                           290                            316
         donald-trump-2019.txt          donald-trump-2020.txt
                           293                            400
  dwight-d-eisenhower-1953.txt   dwight-d-eisenhower-1954.txt
                           350                            287
  dwight-d-eisenhower-1955.txt  dwight-d-eisenhower-1956a.txt
                           332                             52
 dwight-d-eisenhower-1956b.txt   dwight-d-eisenhower-1957.txt
                           378                            189
  dwight-d-eisenhower-1958.txt   dwight-d-eisenhower-1959.txt
                           248                            260
  dwight-d-eisenhower-1960.txt   dwight-d-eisenhower-1961.txt
                           255                            263
 franklin-d-roosevelt-1934.txt  franklin-d-roosevelt-1935.txt
                            72                            139
 franklin-d-roosevelt-1936.txt  franklin-d-roosevelt-1937.txt
                           165                            104
 franklin-d-roosevelt-1938.txt  franklin-d-roosevelt-1939.txt
                           173                            168
 franklin-d-roosevelt-1940.txt  franklin-d-roosevelt-1941.txt
                           121                            148
 franklin-d-roosevelt-1942.txt  franklin-d-roosevelt-1943.txt
                           170                            200
 franklin-d-roosevelt-1944.txt franklin-d-roosevelt-1945a.txt
                           167                            136
franklin-d-roosevelt-1945b.txt           george-bush-1989.txt
                           338                            290
          george-bush-1990.txt           george-bush-1991.txt
                           198                            226
          george-bush-1992.txt         george-w-bush-2001.txt
                           320                            276
        george-w-bush-2002.txt         george-w-bush-2003.txt
                           215                            299
        george-w-bush-2004.txt         george-w-bush-2005.txt
                           275                            239
        george-w-bush-2006.txt         george-w-bush-2007.txt
                           276                            285
        george-w-bush-2008.txt         gerald-r-ford-1975.txt
                           310                            216
        gerald-r-ford-1976.txt         gerald-r-ford-1977.txt
                           271                            213
       harry-s-truman-1946.txt        harry-s-truman-1947.txt
                          1266                            291
       harry-s-truman-1948.txt        harry-s-truman-1949.txt
                           274                            185
       harry-s-truman-1950.txt        harry-s-truman-1951.txt
                           232                            229
       harry-s-truman-1952.txt        harry-s-truman-1953.txt
                           292                            431
        jimmy-carter-1978a.txt         jimmy-carter-1978b.txt
                           248                            507
        jimmy-carter-1979a.txt         jimmy-carter-1979b.txt
                           160                            861
        jimmy-carter-1980a.txt         jimmy-carter-1980b.txt
                           166                           1339
         jimmy-carter-1981.txt        john-f-kennedy-1961.txt
                          1332                            200
       john-f-kennedy-1962.txt        john-f-kennedy-1963.txt
                           269                            212
     lyndon-b-johnson-1964.txt      lyndon-b-johnson-1965.txt
                           139                            257
     lyndon-b-johnson-1966.txt      lyndon-b-johnson-1967.txt
                           265                            353
     lyndon-b-johnson-1968.txt      lyndon-b-johnson-1969.txt
                           208                            194
      richard-m-nixon-1970.txt       richard-m-nixon-1971.txt
                           192                            178
     richard-m-nixon-1972a.txt      richard-m-nixon-1972b.txt
                           158                            728
     richard-m-nixon-1974a.txt      richard-m-nixon-1974b.txt
                           204                            786
        ronald-reagan-1981.txt         ronald-reagan-1982.txt
                           220                            248
        ronald-reagan-1983.txt         ronald-reagan-1984.txt
                           259                            292
        ronald-reagan-1985.txt         ronald-reagan-1986.txt
                           222                            175
        ronald-reagan-1987.txt         ronald-reagan-1988.txt
                           204                            223
    william-j-clinton-1993.txt     william-j-clinton-1994.txt
                           292                            396
    william-j-clinton-1995.txt     william-j-clinton-1996.txt
                           460                            356
    william-j-clinton-1997.txt     william-j-clinton-1998.txt
                           346                            366
    william-j-clinton-1999.txt     william-j-clinton-2000.txt
                           392                            493
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">summary</span><span class="p">(</span><span class="n">sotu_corp</span><span class="p">)</span><span class="c1"># to get types, tokens, sentences</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  Corpus consisting of 96 documents, showing 96 documents:

                          Text Types Tokens Sentences
         barack-obama-2009.txt  1587   6743       286
         barack-obama-2010.txt  1844   8151       419
         barack-obama-2011.txt  1832   7741       395
         barack-obama-2012.txt  1889   7836       415
         barack-obama-2013.txt  1865   7580       361
         barack-obama-2014.txt  1971   7908       376
         barack-obama-2015.txt  1828   7622       376
         barack-obama-2016.txt  1723   6837       360
         donald-trump-2017.txt  1574   5702       290
         donald-trump-2018.txt  1716   5865       316
         donald-trump-2019.txt  1742   5895       293
         donald-trump-2020.txt  1961   7145       400
  dwight-d-eisenhower-1953.txt  1930   7704       350
  dwight-d-eisenhower-1954.txt  1788   6596       287
  dwight-d-eisenhower-1955.txt  1948   8039       332
 dwight-d-eisenhower-1956a.txt   453   1192        52
 dwight-d-eisenhower-1956b.txt  2167   9070       378
  dwight-d-eisenhower-1957.txt  1374   4562       189
  dwight-d-eisenhower-1958.txt  1533   5487       248
  dwight-d-eisenhower-1959.txt  1624   5482       260
  dwight-d-eisenhower-1960.txt  1818   6241       255
  dwight-d-eisenhower-1961.txt  2042   6865       263
 franklin-d-roosevelt-1934.txt   858   2422        72
 franklin-d-roosevelt-1935.txt  1145   3857       139
 franklin-d-roosevelt-1936.txt  1215   4251       165
 franklin-d-roosevelt-1937.txt   987   2977       104
 franklin-d-roosevelt-1938.txt  1369   5117       173
 franklin-d-roosevelt-1939.txt  1225   4165       168
 franklin-d-roosevelt-1940.txt  1050   3511       121
 franklin-d-roosevelt-1941.txt  1100   3658       148
 franklin-d-roosevelt-1942.txt  1116   3912       170
 franklin-d-roosevelt-1943.txt  1388   5071       200
 franklin-d-roosevelt-1944.txt  1234   4219       167
franklin-d-roosevelt-1945a.txt  1035   3441       136
franklin-d-roosevelt-1945b.txt  2084   8895       338
          george-bush-1989.txt  1505   5474       290
          george-bush-1990.txt  1206   4312       198
          george-bush-1991.txt  1302   4481       226
          george-bush-1992.txt  1497   5771       320
        george-w-bush-2001.txt  1298   4927       276
        george-w-bush-2002.txt  1333   4323       215
        george-w-bush-2003.txt  1661   6028       299
        george-w-bush-2004.txt  1579   5790       275
        george-w-bush-2005.txt  1576   5628       239
        george-w-bush-2006.txt  1642   5908       276
        george-w-bush-2007.txt  1689   6161       285
        george-w-bush-2008.txt  1694   6345       310
        gerald-r-ford-1975.txt  1327   4621       216
        gerald-r-ford-1976.txt  1487   5505       271
        gerald-r-ford-1977.txt  1478   5246       213
       harry-s-truman-1946.txt  3956  30890      1266
       harry-s-truman-1947.txt  1652   6619       291
       harry-s-truman-1948.txt  1379   5575       274
       harry-s-truman-1949.txt  1122   3764       185
       harry-s-truman-1950.txt  1336   5588       232
       harry-s-truman-1951.txt  1070   4415       229
       harry-s-truman-1952.txt  1381   5919       292
       harry-s-truman-1953.txt  2190  10869       431
        jimmy-carter-1978a.txt  1340   5051       248
        jimmy-carter-1978b.txt  2728  13225       507
        jimmy-carter-1979a.txt  1071   3639       160
        jimmy-carter-1979b.txt  3710  23426       861
        jimmy-carter-1980a.txt  1070   3801       166
        jimmy-carter-1980b.txt  4858  36401      1339
         jimmy-carter-1981.txt  5188  36774      1332
       john-f-kennedy-1961.txt  1714   5835       200
       john-f-kennedy-1962.txt  2047   7419       269
       john-f-kennedy-1963.txt  1677   6040       212
     lyndon-b-johnson-1964.txt  1103   3603       139
     lyndon-b-johnson-1965.txt  1344   4895       257
     lyndon-b-johnson-1966.txt  1500   6174       265
     lyndon-b-johnson-1967.txt  1842   8024       353
     lyndon-b-johnson-1968.txt  1440   5524       208
     lyndon-b-johnson-1969.txt  1208   4605       194
      richard-m-nixon-1970.txt  1270   4934       192
      richard-m-nixon-1971.txt  1149   4971       178
     richard-m-nixon-1972a.txt  1164   4424       158
     richard-m-nixon-1972b.txt  3286  18979       728
     richard-m-nixon-1974a.txt  1267   5690       204
     richard-m-nixon-1974b.txt  3815  24507       786
        ronald-reagan-1981.txt  1382   4920       220
        ronald-reagan-1982.txt  1608   5765       248
        ronald-reagan-1983.txt  1681   6156       259
        ronald-reagan-1984.txt  1612   5563       292
        ronald-reagan-1985.txt  1478   4725       222
        ronald-reagan-1986.txt  1260   3904       175
        ronald-reagan-1987.txt  1343   4286       204
        ronald-reagan-1988.txt  1506   5402       223
    william-j-clinton-1993.txt  1564   7698       292
    william-j-clinton-1994.txt  1767   8285       396
    william-j-clinton-1995.txt  1939  10203       460
    william-j-clinton-1996.txt  1584   7038       356
    william-j-clinton-1997.txt  1719   7548       346
    william-j-clinton-1998.txt  1964   8202       366
    william-j-clinton-1999.txt  1932   8436       392
    william-j-clinton-2000.txt  2113  10222       493
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">summary</span><span class="p">(</span><span class="n">sotu_corp</span><span class="p">,</span><span class="m">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Corpus consisting of 96 documents, showing 5 documents:

                 Text Types Tokens Sentences
barack-obama-2009.txt  1587   6743       286
barack-obama-2010.txt  1844   8151       419
barack-obama-2011.txt  1832   7741       395
barack-obama-2012.txt  1889   7836       415
barack-obama-2013.txt  1865   7580       361
</pre></div>
</div>
</div>
</div>
</section>
<section id="tokenize-the-corpus">
<h2>Tokenize the corpus<a class="headerlink" href="#tokenize-the-corpus" title="Permalink to this heading">¶</a></h2>
<p>The next step is tokenization, where we break down text into individual
tokens: words, characters, and symbols. Here, we do remove numbers,
punctuation, and symbols first.</p>
<p>Finally, we convert the tokens to lowercase and visualize the first
tokens of the first document.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--11-input--1" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sotu_toks</span><span class="w"> </span><span class="o">&lt;-</span><span class="nf">tokens</span><span class="p">(</span><span class="n">sotu_corp</span><span class="p">)</span><span class="c1"># It removes separators (whitespaces)but we can remove numbers,punctuation, symbols</span>

<span class="n">sotu_toks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tokens</span><span class="p">(</span><span class="n">sotu_corp</span><span class="p">,</span><span class="w"> </span><span class="n">remove_punct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">sotu_toks</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--11-input--2" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Tokens consisting of 96 documents.
barack-obama-2009.txt :
 [1] &quot;Madam&quot;     &quot;Speaker&quot;   &quot;Mr&quot;        &quot;Vice&quot;      &quot;President&quot; &quot;Members&quot;
 [7] &quot;of&quot;        &quot;Congress&quot;  &quot;the&quot;       &quot;First&quot;     &quot;Lady&quot;      &quot;of&quot;
[ ... and 6,028 more ]

barack-obama-2010.txt :
 [1] &quot;Madam&quot;         &quot;Speaker&quot;       &quot;Vice&quot;          &quot;President&quot;
 [5] &quot;Biden&quot;         &quot;Members&quot;       &quot;of&quot;            &quot;Congress&quot;
 [9] &quot;distinguished&quot; &quot;guests&quot;        &quot;and&quot;           &quot;fellow&quot;
[ ... and 7,172 more ]

barack-obama-2011.txt :
 [1] &quot;Mr&quot;            &quot;Speaker&quot;       &quot;Mr&quot;            &quot;Vice&quot;
 [5] &quot;President&quot;     &quot;Members&quot;       &quot;of&quot;            &quot;Congress&quot;
 [9] &quot;distinguished&quot; &quot;guests&quot;        &quot;and&quot;           &quot;fellow&quot;
[ ... and 6,823 more ]

barack-obama-2012.txt :
 [1] &quot;Mr&quot;            &quot;Speaker&quot;       &quot;Mr&quot;            &quot;Vice&quot;
 [5] &quot;President&quot;     &quot;Members&quot;       &quot;of&quot;            &quot;Congress&quot;
 [9] &quot;distinguished&quot; &quot;guests&quot;        &quot;and&quot;           &quot;fellow&quot;
[ ... and 6,975 more ]

barack-obama-2013.txt :
 [1] &quot;Please&quot;    &quot;everybody&quot; &quot;have&quot;      &quot;a&quot;         &quot;seat&quot;      &quot;Mr&quot;
 [7] &quot;Speaker&quot;   &quot;Mr&quot;        &quot;Vice&quot;      &quot;President&quot; &quot;Members&quot;   &quot;of&quot;
[ ... and 6,736 more ]

barack-obama-2014.txt :
 [1] &quot;The&quot;       &quot;President&quot; &quot;Mr&quot;        &quot;Speaker&quot;   &quot;Mr&quot;        &quot;Vice&quot;
 [7] &quot;President&quot; &quot;Members&quot;   &quot;of&quot;        &quot;Congress&quot;  &quot;my&quot;        &quot;fellow&quot;
[ ... and 6,945 more ]

[ reached max_ndoc ... 90 more documents ]
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--10-input--1" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sotu_toks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tokens_tolower</span><span class="p">(</span><span class="n">sotu_toks</span><span class="p">)</span>

<span class="n">sotu_toks</span><span class="w"> </span><span class="p">[[</span><span class="m">1</span><span class="p">]][</span><span class="m">1</span><span class="o">:</span><span class="m">20</span><span class="p">]</span><span class="c1"># first 20 tokens of document 1</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--10-input--2" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> [1] &quot;madam&quot;     &quot;speaker&quot;   &quot;mr&quot;        &quot;vice&quot;      &quot;president&quot;
 [6] &quot;members&quot;   &quot;of&quot;        &quot;congress&quot;  &quot;the&quot;       &quot;first&quot;
[11] &quot;lady&quot;      &quot;of&quot;        &quot;the&quot;       &quot;united&quot;    &quot;states&quot;
[16] &quot;she&#39;s&quot;     &quot;around&quot;    &quot;here&quot;      &quot;somewhere&quot; &quot;i&quot;
</pre></div>
</div>
</div>
</div>
</section>
<section id="keywords-in-context">
<h2>Keywords in context<a class="headerlink" href="#keywords-in-context" title="Permalink to this heading">¶</a></h2>
<p>To examine how a word is used in a wider context, we can search for keywords in context.
<code class="docutils literal notranslate"><span class="pre">kwic()</span></code> allows you to identify a keyword of interest, and see a number of words before and after it.
We can specify the number of context words to be displayed with the argument <code class="docutils literal notranslate"><span class="pre">window</span></code>.</p>
<p>The argument pattern also takes a wild card (<code class="docutils literal notranslate"><span class="pre">*</span></code>) and multiple keywords in a character vector.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--12-input--1" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">kw_health</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">kwic</span><span class="p">(</span><span class="n">sotu_toks</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="o">=</span><span class="s">&quot;health*&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">kw_health</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--12-input--2" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Keyword-in-context with 6 matches.
 [barack-obama-2009.txt, 448]
 [barack-obama-2009.txt, 585]
 [barack-obama-2009.txt, 683]
 [barack-obama-2009.txt, 916]
[barack-obama-2009.txt, 1026]
[barack-obama-2009.txt, 2371]

                   import more oil today than ever before the cost of | health  |
                           sake of a quick profit at the expense of a | healthy |
         job creation restart lending and invest in areas like energy | health  |
                     who can now keep their jobs and educate our kids | health  |
 will be able to receive extended unemployment benefits and continued | health  |
                        of our dependence on oil and the high cost of | health  |

care eats up more and more of our savings each
market people bought homes they knew they couldn&#39;t afford from
care and education that will grow our economy even as
care professionals can continue caring for our sick there are
care coverage to help them weather this storm now i
care the schools that aren&#39;t preparing our children and the
</pre></div>
</div>
</div>
</div>
<p>Using a vector, we can search for multiple patterns at once.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--13-input--1" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">kw_health2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">kwic</span><span class="p">(</span><span class="n">sotu_toks</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;health*&quot;</span><span class="p">,</span><span class="s">&quot;care&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">kw_health2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--13-input--2" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Keyword-in-context with 6 matches.
[barack-obama-2009.txt, 448]
[barack-obama-2009.txt, 449]
[barack-obama-2009.txt, 585]
[barack-obama-2009.txt, 683]
[barack-obama-2009.txt, 684]
[barack-obama-2009.txt, 916]


             import more oil today than ever before the cost of | health  |
             more oil today than ever before the cost of health |  care   |
                     sake of a quick profit at the expense of a | healthy |
   job creation restart lending and invest in areas like energy | health  |
creation restart lending and invest in areas like energy health |  care   |
               who can now keep their jobs and educate our kids | health  |

care eats up more and more of our savings each
eats up more and more of our savings each year
market people bought homes they knew they couldn&#39;t afford from
care and education that will grow our economy even as
and education that will grow our economy even as we
care professionals can continue caring for our sick there are
</pre></div>
</div>
</div>
</div>
<p>We can also search for multi-word expressions.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--14-input--1" name="tab-set--14" type="radio"><label class="tab-label" for="tab-set--14-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">kw_healthcare</span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">kwic</span><span class="p">(</span><span class="n">sotu_toks</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="o">=</span><span class="nf">phrase</span><span class="p">(</span><span class="s">&quot;health care&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="select-tokens">
<h2>Select tokens<a class="headerlink" href="#select-tokens" title="Permalink to this heading">¶</a></h2>
<p>We also remove stopwords, which are words that are not particularly
useful for understanding the meaning of the text, like “an”, “have”, and
“about”. The command for this is <code class="docutils literal notranslate"><span class="pre">tokens_select()</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--16-input--1" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sotu_toks_nostop</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tokens_select</span><span class="p">(</span><span class="n">sotu_toks</span><span class="p">,</span>
<span class="w">                                  </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">stopwords</span><span class="p">(</span><span class="s">&quot;english&quot;</span><span class="p">),</span>
<span class="w">                                  </span><span class="n">selection</span><span class="o">=</span><span class="s">&quot;remove&quot;</span><span class="p">)</span>
<span class="nf">stopwords</span><span class="p">(</span><span class="s">&quot;english&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--16-input--2" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  [1] &quot;i&quot;          &quot;me&quot;         &quot;my&quot;         &quot;myself&quot;     &quot;we&quot;
  [6] &quot;our&quot;        &quot;ours&quot;       &quot;ourselves&quot;  &quot;you&quot;        &quot;your&quot;
 [11] &quot;yours&quot;      &quot;yourself&quot;   &quot;yourselves&quot; &quot;he&quot;         &quot;him&quot;
 [16] &quot;his&quot;        &quot;himself&quot;    &quot;she&quot;        &quot;her&quot;        &quot;hers&quot;
 [21] &quot;herself&quot;    &quot;it&quot;         &quot;its&quot;        &quot;itself&quot;     &quot;they&quot;
 [26] &quot;them&quot;       &quot;their&quot;      &quot;theirs&quot;     &quot;themselves&quot; &quot;what&quot;
 [31] &quot;which&quot;      &quot;who&quot;        &quot;whom&quot;       &quot;this&quot;       &quot;that&quot;
 [36] &quot;these&quot;      &quot;those&quot;      &quot;am&quot;         &quot;is&quot;         &quot;are&quot;
 [41] &quot;was&quot;        &quot;were&quot;       &quot;be&quot;         &quot;been&quot;       &quot;being&quot;
 [46] &quot;have&quot;       &quot;has&quot;        &quot;had&quot;        &quot;having&quot;     &quot;do&quot;
 [51] &quot;does&quot;       &quot;did&quot;        &quot;doing&quot;      &quot;would&quot;      &quot;should&quot;
 [56] &quot;could&quot;      &quot;ought&quot;      &quot;i&#39;m&quot;        &quot;you&#39;re&quot;     &quot;he&#39;s&quot;
 [61] &quot;she&#39;s&quot;      &quot;it&#39;s&quot;       &quot;we&#39;re&quot;      &quot;they&#39;re&quot;    &quot;i&#39;ve&quot;
 [66] &quot;you&#39;ve&quot;     &quot;we&#39;ve&quot;      &quot;they&#39;ve&quot;    &quot;i&#39;d&quot;        &quot;you&#39;d&quot;
 [71] &quot;he&#39;d&quot;       &quot;she&#39;d&quot;      &quot;we&#39;d&quot;       &quot;they&#39;d&quot;     &quot;i&#39;ll&quot;
 [76] &quot;you&#39;ll&quot;     &quot;he&#39;ll&quot;      &quot;she&#39;ll&quot;     &quot;we&#39;ll&quot;      &quot;they&#39;ll&quot;
 [81] &quot;isn&#39;t&quot;      &quot;aren&#39;t&quot;     &quot;wasn&#39;t&quot;     &quot;weren&#39;t&quot;    &quot;hasn&#39;t&quot;
 [86] &quot;haven&#39;t&quot;    &quot;hadn&#39;t&quot;     &quot;doesn&#39;t&quot;    &quot;don&#39;t&quot;      &quot;didn&#39;t&quot;
 [91] &quot;won&#39;t&quot;      &quot;wouldn&#39;t&quot;   &quot;shan&#39;t&quot;     &quot;shouldn&#39;t&quot;  &quot;can&#39;t&quot;
 [96] &quot;cannot&quot;     &quot;couldn&#39;t&quot;   &quot;mustn&#39;t&quot;    &quot;let&#39;s&quot;      &quot;that&#39;s&quot;
[101] &quot;who&#39;s&quot;      &quot;what&#39;s&quot;     &quot;here&#39;s&quot;     &quot;there&#39;s&quot;    &quot;when&#39;s&quot;
[106] &quot;where&#39;s&quot;    &quot;why&#39;s&quot;      &quot;how&#39;s&quot;      &quot;a&quot;          &quot;an&quot;
[111] &quot;the&quot;        &quot;and&quot;        &quot;but&quot;        &quot;if&quot;         &quot;or&quot;
[116] &quot;because&quot;    &quot;as&quot;         &quot;until&quot;      &quot;while&quot;      &quot;of&quot;
[121] &quot;at&quot;         &quot;by&quot;         &quot;for&quot;        &quot;with&quot;       &quot;about&quot;
[126] &quot;against&quot;    &quot;between&quot;    &quot;into&quot;       &quot;through&quot;    &quot;during&quot;
[131] &quot;before&quot;     &quot;after&quot;      &quot;above&quot;      &quot;below&quot;      &quot;to&quot;
[136] &quot;from&quot;       &quot;up&quot;         &quot;down&quot;       &quot;in&quot;         &quot;out&quot;
[141] &quot;on&quot;         &quot;off&quot;        &quot;over&quot;       &quot;under&quot;      &quot;again&quot;
[146] &quot;further&quot;    &quot;then&quot;       &quot;once&quot;       &quot;here&quot;       &quot;there&quot;
[151] &quot;when&quot;       &quot;where&quot;      &quot;why&quot;        &quot;how&quot;        &quot;all&quot;
[156] &quot;any&quot;        &quot;both&quot;       &quot;each&quot;       &quot;few&quot;        &quot;more&quot;
[161] &quot;most&quot;       &quot;other&quot;      &quot;some&quot;       &quot;such&quot;       &quot;no&quot;
[166] &quot;nor&quot;        &quot;not&quot;        &quot;only&quot;       &quot;own&quot;        &quot;same&quot;
[171] &quot;so&quot;         &quot;than&quot;       &quot;too&quot;        &quot;very&quot;       &quot;will&quot;
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--15-input--1" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sotu_toks_nostop</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--15-input--2" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Tokens consisting of 96 documents.
barack-obama-2009.txt :
 [1] &quot;madam&quot;     &quot;speaker&quot;   &quot;mr&quot;        &quot;vice&quot;      &quot;president&quot; &quot;members&quot;   &quot;congress&quot;
 [8] &quot;first&quot;     &quot;lady&quot;      &quot;united&quot;    &quot;states&quot;    &quot;around&quot;
[ ... and 3,000 more ]

barack-obama-2010.txt :
 [1] &quot;madam&quot;         &quot;speaker&quot;       &quot;vice&quot;          &quot;president&quot;     &quot;biden&quot;
 [6] &quot;members&quot;       &quot;congress&quot;      &quot;distinguished&quot; &quot;guests&quot;        &quot;fellow&quot;
[11] &quot;americans&quot;     &quot;constitution&quot;
[ ... and 3,698 more ]

barack-obama-2011.txt :
 [1] &quot;mr&quot;            &quot;speaker&quot;       &quot;mr&quot;            &quot;vice&quot;          &quot;president&quot;
 [6] &quot;members&quot;       &quot;congress&quot;      &quot;distinguished&quot; &quot;guests&quot;        &quot;fellow&quot;
[11] &quot;americans&quot;     &quot;tonight&quot;
[ ... and 3,512 more ]

barack-obama-2012.txt :
 [1] &quot;mr&quot;            &quot;speaker&quot;       &quot;mr&quot;            &quot;vice&quot;          &quot;president&quot;
 [6] &quot;members&quot;       &quot;congress&quot;      &quot;distinguished&quot; &quot;guests&quot;        &quot;fellow&quot;
[11] &quot;americans&quot;     &quot;last&quot;
[ ... and 3,690 more ]

barack-obama-2013.txt :
 [1] &quot;please&quot;    &quot;everybody&quot; &quot;seat&quot;      &quot;mr&quot;        &quot;speaker&quot;   &quot;mr&quot;        &quot;vice&quot;
 [8] &quot;president&quot; &quot;members&quot;   &quot;congress&quot;  &quot;fellow&quot;    &quot;americans&quot;
[ ... and 3,653 more ]

barack-obama-2014.txt :
 [1] &quot;president&quot; &quot;mr&quot;        &quot;speaker&quot;   &quot;mr&quot;        &quot;vice&quot;      &quot;president&quot; &quot;members&quot;
 [8] &quot;congress&quot;  &quot;fellow&quot;    &quot;americans&quot; &quot;today&quot;     &quot;america&quot;
[ ... and 3,767 more ]

[ reached max_ndoc ... 90 more documents ]
</pre></div>
</div>
</div>
</div>
<p>We can do the same with <code class="docutils literal notranslate"><span class="pre">tokens_remove(</span> <span class="pre">,pattern=stopwords(&quot;en&quot;))</span></code>.</p>
</section>
<section id="generating-n-grams">
<h2>Generating n-grams<a class="headerlink" href="#generating-n-grams" title="Permalink to this heading">¶</a></h2>
<p>An n-gram is a contiguous sequence of n items in a text.</p>
<p><code class="docutils literal notranslate"><span class="pre">tokens_ngrams()</span></code> generates a set of n-grams (tokens in sequence) from a tokenized text object.
It gives all possible combinations of tokens.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--17-input--1" name="tab-set--17" type="radio"><label class="tab-label" for="tab-set--17-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">toks_ngram</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tokens_ngrams</span><span class="p">(</span><span class="n">sotu_toks_nostop</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="o">:</span><span class="m">4</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">toks_ngram</span><span class="p">[[</span><span class="m">1</span><span class="p">]],</span><span class="w"> </span><span class="m">30</span><span class="p">)</span>
<span class="nf">tail</span><span class="p">(</span><span class="n">toks_ngram</span><span class="p">[[</span><span class="m">1</span><span class="p">]],</span><span class="w"> </span><span class="m">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--17-input--2" name="tab-set--17" type="radio"><label class="tab-label" for="tab-set--17-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> [1] &quot;madam_speaker&quot;         &quot;speaker_mr&quot;            &quot;mr_vice&quot;
 [4] &quot;vice_president&quot;        &quot;president_members&quot;     &quot;members_congress&quot;
 [7] &quot;congress_first&quot;        &quot;first_lady&quot;            &quot;lady_united&quot;
[10] &quot;united_states&quot;         &quot;states_around&quot;         &quot;around_somewhere&quot;
[13] &quot;somewhere_come&quot;        &quot;come_tonight&quot;          &quot;tonight_address&quot;
[16] &quot;address_distinguished&quot; &quot;distinguished_men&quot;     &quot;men_women&quot;
[19] &quot;women_great&quot;           &quot;great_chamber&quot;         &quot;chamber_speak&quot;
[22] &quot;speak_frankly&quot;         &quot;frankly_directly&quot;      &quot;directly_men&quot;
[25] &quot;men_women&quot;             &quot;women_sent&quot;            &quot;sent_us&quot;
[28] &quot;us_know&quot;               &quot;know_many&quot;             &quot;many_americans&quot;

 [1] &quot;fear_challenges_time_summon&quot;         &quot;challenges_time_summon_enduring&quot;
 [3] &quot;time_summon_enduring_spirit&quot;         &quot;summon_enduring_spirit_america&quot;
 [5] &quot;enduring_spirit_america_quit&quot;        &quot;spirit_america_quit_someday&quot;
 [7] &quot;america_quit_someday_years&quot;          &quot;quit_someday_years_now&quot;
 [9] &quot;someday_years_now_children&quot;          &quot;years_now_children_can&quot;
[11] &quot;now_children_can_tell&quot;               &quot;children_can_tell_children&quot;
[13] &quot;can_tell_children_time&quot;              &quot;tell_children_time_performed&quot;
[15] &quot;children_time_performed_words&quot;       &quot;time_performed_words_carved&quot;
[17] &quot;performed_words_carved_chamber&quot;      &quot;words_carved_chamber_something&quot;
[19] &quot;carved_chamber_something_worthy&quot;     &quot;chamber_something_worthy_remembered&quot;
[21] &quot;something_worthy_remembered_thank&quot;   &quot;worthy_remembered_thank_god&quot;
[23] &quot;remembered_thank_god_bless&quot;          &quot;thank_god_bless_may&quot;
[25] &quot;god_bless_may_god&quot;                   &quot;bless_may_god_bless&quot;
[27] &quot;may_god_bless_united&quot;                &quot;god_bless_united_states&quot;
[29] &quot;bless_united_states_america&quot;         &quot;united_states_america_thank&quot;
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tokens_compound()</span></code> generates n-grams more selectively. For example, you can make bi-grams using <code class="docutils literal notranslate"><span class="pre">phrase()</span></code> and a wild card (<code class="docutils literal notranslate"><span class="pre">*</span></code>)</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--18-input--1" name="tab-set--18" type="radio"><label class="tab-label" for="tab-set--18-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">toks_neg_bigram</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tokens_compound</span><span class="p">(</span><span class="n">sotu_toks_nostop</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">phrase</span><span class="p">(</span><span class="s">&quot;united *&quot;</span><span class="p">))</span>
<span class="n">toks_neg_bigram_select</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tokens_select</span><span class="p">(</span><span class="n">toks_neg_bigram</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">phrase</span><span class="p">(</span><span class="s">&quot;united_*&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="collocations">
<h2>Collocations<a class="headerlink" href="#collocations" title="Permalink to this heading">¶</a></h2>
<p>A collocation is a sequence of words or terms that co-occur more often than would be expected by chance.
Collocations can be more informative or meaningful than ngrams as they allow us to evaluate the strength
and significance of the association between sequences of words.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--19-input--1" name="tab-set--19" type="radio"><label class="tab-label" for="tab-set--19-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sotu_collocations</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">textstat_collocations</span><span class="p">(</span><span class="n">sotu_toks_nostop</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;lambda&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">min_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="n">smoothing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">sotu_collocations</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--19-input--2" name="tab-set--19" type="radio"><label class="tab-label" for="tab-set--19-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>         collocation count count_nested length   lambda        z
1      united states   709            0      2 7.885126 87.41215
2          last year   388            0      2 4.996601 70.81536
3        health care   235            0      2 6.353499 63.41266
4    american people   328            0      2 4.183064 61.56281
5    social security   231            0      2 6.452656 60.44997
6 federal government   277            0      2 4.307875 58.60510
</pre></div>
</div>
</div>
</div>
</section>
<section id="document-feature-matrix">
<h2>Document feature matrix<a class="headerlink" href="#document-feature-matrix" title="Permalink to this heading">¶</a></h2>
<p>We are going to create a document feature matrix (dfm) from a tokens
object. We will then turn the dfm into a tidy data frame. A tidy data
frame means one variable per column, one observation per row, one value
per cell.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--21-input--1" name="tab-set--21" type="radio"><label class="tab-label" for="tab-set--21-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sotu_dfm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">dfm</span><span class="p">(</span><span class="n">sotu_toks</span><span class="p">)</span>
<span class="n">sotu_dfm</span>

<span class="nf">dim</span><span class="p">(</span><span class="n">sotu_dfm</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--21-input--2" name="tab-set--21" type="radio"><label class="tab-label" for="tab-set--21-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Document-feature matrix of: 96 documents, 20,805 features (92.39% sparse) and 0 docvars.
                       features
docs                    madam speaker mr vice president members  of congress the first
  barack-obama-2009.txt     1       1  1    2         5       1 161       10 269     8
  barack-obama-2010.txt     1       1  0    2         6       2 166       10 336     5
  barack-obama-2011.txt     0       3  2    1         2       2 195       10 354    11
  barack-obama-2012.txt     0       2  2    2         5       3 170       15 294     8
  barack-obama-2013.txt     0       1  2    1         2       1 172       17 302     6
  barack-obama-2014.txt     0       2  2    2         7       3 154       20 284    14
[ reached max_ndoc ... 90 more documents, reached max_nfeat ... 20,795 more features ]

[1]    96 20805
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--20-input--1" name="tab-set--20" type="radio"><label class="tab-label" for="tab-set--20-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ndoc</span><span class="p">(</span><span class="n">sotu_dfm</span><span class="p">)</span>
<span class="nf">nfeat</span><span class="p">(</span><span class="n">sotu_dfm</span><span class="p">)</span>
<span class="nf">topfeatures</span><span class="p">(</span><span class="n">sotu_dfm</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--20-input--2" name="tab-set--20" type="radio"><label class="tab-label" for="tab-set--20-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[1] 96

[1] 20805

  the    of   and    to    in     a    we   our  that   for
37864 23162 22842 21779 13935 10702 10156  9866  7908  7569
</pre></div>
</div>
</div>
</div>
</section>
<section id="tf-idf-analysis">
<h2>TF-IDF analysis<a class="headerlink" href="#tf-idf-analysis" title="Permalink to this heading">¶</a></h2>
<p>We can also do TF-IDF analysis (Term frequency-Inverse Document
Frequency). The purpose of this type of analysis is to find a document’s
most distinctive terms: How frequent a term is in a doc/how frequent it
is across all docs. (High score=distinctive, Low score=not distinctive).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--23-input--1" name="tab-set--23" type="radio"><label class="tab-label" for="tab-set--23-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add a tf-idf on a dfm to determine a document&#39;s most distinctive words</span>
<span class="n">sotu_tf_idf</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">dfm_tfidf</span><span class="p">(</span><span class="n">sotu_dfm</span><span class="p">)</span>
<span class="n">sotu_tf_idf</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--23-input--2" name="tab-set--23" type="radio"><label class="tab-label" for="tab-set--23-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Document-feature matrix of: 96 documents, 20,805 features (92.39% sparse) and 0 docvars.
                       features
docs                      madam    speaker         mr      vice  president    members of
  barack-obama-2009.txt 1.20412 0.07918125 0.08464414 0.5841503 0.14014362 0.02802872  0
  barack-obama-2010.txt 1.20412 0.07918125 0          0.5841503 0.16817234 0.05605745  0
  barack-obama-2011.txt 0       0.23754374 0.16928828 0.2920752 0.05605745 0.05605745  0
  barack-obama-2012.txt 0       0.15836249 0.16928828 0.5841503 0.14014362 0.08408617  0
  barack-obama-2013.txt 0       0.07918125 0.16928828 0.2920752 0.05605745 0.02802872  0
  barack-obama-2014.txt 0       0.15836249 0.16928828 0.5841503 0.19620107 0.08408617  0
                       features
docs                    congress the      first
  barack-obama-2009.txt        0   0 0.07314704
  barack-obama-2010.txt        0   0 0.04571690
  barack-obama-2011.txt        0   0 0.10057717
  barack-obama-2012.txt        0   0 0.07314704
  barack-obama-2013.txt        0   0 0.05486028
  barack-obama-2014.txt        0   0 0.12800731
[ reached max_ndoc ... 90 more documents, reached max_nfeat ... 20,795 more features ]
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--22-input--1" name="tab-set--22" type="radio"><label class="tab-label" for="tab-set--22-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Simple frequency analysis</span>
<span class="n">sotu_freq</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">textstat_frequency</span><span class="p">(</span><span class="n">sotu_dfm</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">sotu_freq</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--22-input--2" name="tab-set--22" type="radio"><label class="tab-label" for="tab-set--22-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   feature frequency rank docfreq group
1      the     37864    1      96   all
2       of     23162    2      96   all
3      and     22842    3      96   all
4       to     21779    4      96   all
5       in     13935    5      96   all
6        a     10702    6      96   all
7       we     10156    7      96   all
8      our      9866    8      96   all
9     that      7908    9      96   all
10     for      7569   10      96   all
11      is      5905   11      96   all
12    will      5334   12      96   all
13       i      5230   13      96   all
14    this      5104   14      96   all
15    have      4886   15      96   all
16      be      4083   16      96   all
17     are      3991   17      96   all
18    with      3722   18      96   all
19      on      3637   19      96   all
20      it      3528   20      96   all
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-a-word-cloud">
<h2>Create a word cloud<a class="headerlink" href="#create-a-word-cloud" title="Permalink to this heading">¶</a></h2>
<p>We can use word clouds as a simple way to represent our corpus. This
first version will likely time out, so make sure to stop the process to
see the output.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--25-input--1" name="tab-set--25" type="radio"><label class="tab-label" for="tab-set--25-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">textplot_wordcloud</span><span class="p">(</span><span class="n">sotu_dfm</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--24-input--1" name="tab-set--24" type="radio"><label class="tab-label" for="tab-set--24-input--1">Output</label><div class="tab-content docutils container">
<figure class="align-default">
<img alt="../../_images/wordcloud1.png" src="../../_images/wordcloud1.png" />
</figure>
</div>
</div>
<p>This word cloud is a bit overwhelming, so let’s pare it down a bit.</p>
<p>Here we add some specifications to limit the number of words included
and to provide some aesthetic value. You shouldn’t need to halt this
process.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--27-input--1" name="tab-set--27" type="radio"><label class="tab-label" for="tab-set--27-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">textplot_wordcloud</span><span class="p">(</span><span class="n">sotu_dfm</span><span class="p">,</span>
<span class="w">                  </span><span class="n">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.25</span><span class="p">,</span><span class="w"> </span><span class="c1">#proportion of words with 90 degree rotation</span>
<span class="w">                  </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rev</span><span class="p">(</span><span class="n">RColorBrewer</span><span class="o">::</span><span class="nf">brewer.pal</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;RdBu&quot;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--26-input--1" name="tab-set--26" type="radio"><label class="tab-label" for="tab-set--26-input--1">Output</label><div class="tab-content docutils container">
<figure class="align-default">
<img alt="../../_images/wordcloud2.png" src="../../_images/wordcloud2.png" />
</figure>
</div>
</div>
</section>
<section id="lexical-diversity">
<h2>Lexical diversity<a class="headerlink" href="#lexical-diversity" title="Permalink to this heading">¶</a></h2>
<p>Lexical diversity is a measure of how many times a word appears in a text
and where it appears relative to the beginning of the document</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--28-input--1" name="tab-set--28" type="radio"><label class="tab-label" for="tab-set--28-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sotu_lexdiv</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">textstat_lexdiv</span><span class="p">(</span><span class="n">sotu_dfm</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">sotu_lexdiv</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--28-input--2" name="tab-set--28" type="radio"><label class="tab-label" for="tab-set--28-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>               document       TTR
1 barack-obama-2009.txt 0.2487967
2 barack-obama-2010.txt 0.2373709
3 barack-obama-2011.txt 0.2491568
4 barack-obama-2012.txt 0.2465636
5 barack-obama-2013.txt 0.2554831
6 barack-obama-2014.txt 0.2607883
</pre></div>
</div>
</div>
</div>
</section>
<section id="working-with-a-subset">
<h2>Working with a subset<a class="headerlink" href="#working-with-a-subset" title="Permalink to this heading">¶</a></h2>
<p>We can also work with a subset of the texts in the corpus. Here we do
some additional pre-processing, before we create a subset containing
only President Obama’s speeches.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--29-input--1" name="tab-set--29" type="radio"><label class="tab-label" for="tab-set--29-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sotu2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">readtext</span><span class="p">(</span><span class="s">&quot;texts&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="n">docvarsfrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;filenames&quot;</span><span class="p">)</span>

<span class="n">sotu2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sotu2</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">   </span><span class="nf">mutate</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="w"> </span><span class="nf">str_sub</span><span class="p">(</span><span class="n">.</span><span class="o">$</span><span class="n">docvar1</span><span class="p">,</span><span class="w"> </span><span class="m">-5</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="c1"># create year column</span>
<span class="w">   </span><span class="nf">mutate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="w"> </span><span class="nf">str_sub</span><span class="p">(</span><span class="n">.</span><span class="o">$</span><span class="n">docvar1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">-6</span><span class="p">))</span><span class="w"> </span><span class="c1"># create name column</span>

<span class="n">sotu2</span><span class="o">$</span><span class="n">year</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sotu2</span><span class="o">$</span><span class="n">year</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">   </span><span class="nf">str_replace_all</span><span class="p">(</span><span class="s">&quot;[-ab]&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1"># remove unwanted characters from the year column</span>

<span class="n">sotu2</span><span class="o">$</span><span class="n">year</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="n">sotu2</span><span class="o">$</span><span class="n">year</span><span class="p">)</span>

<span class="n">sotu2</span><span class="o">$</span><span class="n">name</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sotu2</span><span class="o">$</span><span class="n">name</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">   </span><span class="nf">str_replace_all</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">   </span><span class="nf">trimws</span><span class="p">()</span><span class="w">  </span><span class="c1">#trim leading and trailing whitespace from terms in name field\</span>

<span class="n">sotu_corp2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">corpus</span><span class="p">(</span><span class="n">sotu2</span><span class="p">)</span>
<span class="n">obama_corpus</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">corpus_subset</span><span class="p">(</span><span class="n">sotu_corp2</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="o">==</span><span class="s">&quot;barack obama&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>From here, we can repeat the same steps we did above.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--30-input--1" name="tab-set--30" type="radio"><label class="tab-label" for="tab-set--30-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Clean the tokens, create a dfm, and make it tidy</span>
<span class="n">obama_toks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tokens</span><span class="p">(</span><span class="n">obama_corpus</span><span class="p">,</span><span class="w"> </span><span class="n">remove_numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">remove_punct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span>
<span class="n">obama_toks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tokens_remove</span><span class="p">(</span><span class="n">obama_toks</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">stopwords</span><span class="p">(</span><span class="s">&quot;english&quot;</span><span class="p">))</span>
<span class="n">obama_toks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tokens_tolower</span><span class="p">(</span><span class="n">obama_toks</span><span class="p">)</span>
<span class="n">obama_dfm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">dfm</span><span class="p">(</span><span class="n">obama_toks</span><span class="p">)</span>

<span class="n">obama_dfm</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--30-input--2" name="tab-set--30" type="radio"><label class="tab-label" for="tab-set--30-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Document-feature matrix of: 8 documents, 5,104 features (69.68% sparse) and 3 docvars.
                       features
docs                    madam speaker mr vice president members congress first lady
  barack-obama-2009.txt     1       1  1    2         5       1       10     8    1
  barack-obama-2010.txt     1       1  0    2         6       2       10     5    1
  barack-obama-2011.txt     0       3  2    1         2       2       10    11    0
  barack-obama-2012.txt     0       2  2    2         5       3       15     8    0
  barack-obama-2013.txt     0       1  2    1         2       1       17     6    0
  barack-obama-2014.txt     0       2  2    2         7       3       20    14    1
                       features
docs                    united
  barack-obama-2009.txt      5
  barack-obama-2010.txt      7
  barack-obama-2011.txt      4
  barack-obama-2012.txt      6
  barack-obama-2013.txt     10
  barack-obama-2014.txt      6
[ reached max_ndoc ... 2 more documents, reached max_nfeat ... 5,094 more features ]
</pre></div>
</div>
</div>
</div>
<p>We can look at keywords in context for this subset, as well.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--31-input--1" name="tab-set--31" type="radio"><label class="tab-label" for="tab-set--31-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#####Keywords in Context: What words immediately precede and follow terms of interest</span>

<span class="n">kw_health</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">kwic</span><span class="p">(</span><span class="n">obama_toks</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;health*&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">kw_health</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--31-input--2" name="tab-set--31" type="radio"><label class="tab-label" for="tab-set--31-input--2">Output</label><div class="tab-content docutils container">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Keyword-in-context with 6 matches.
 [barack-obama-2009.txt, 206]
 [barack-obama-2009.txt, 270]
 [barack-obama-2009.txt, 321]
 [barack-obama-2009.txt, 431]
 [barack-obama-2009.txt, 486]
 [barack-obama-2009.txt, 1146]

                           finding new sources energy yet import oil today ever cost
      instead opportunity invest future regulations gutted sake quick profit expense
               time jump-start job creation restart lending invest areas like energy
                           mass transit plan teachers can now keep jobs educate kids
 americans lost jobs recession able receive extended unemployment benefits continued
               another american century confront last price dependence oil high cost

 | health  |
 | healthy |
 | health  |
 | health  |
 | health  |
 | health  |

 care eats savings year yet keep delaying reform children compete
 market people bought homes knew afford banks lenders pushed bad
 care education grow economy even make hard choices bring deficit
 care professionals can continue caring sick police officers still streets
 care coverage help weather storm now know chamber watching home
 care schools preparing children mountain debt stand inherit responsibility next
</pre></div>
</div>
</div>
</div>
<p>We can make a lexical dispersion plot to visualize where our keyword is appearing across the documents.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--33-input--1" name="tab-set--33" type="radio"><label class="tab-label" for="tab-set--33-input--1">R</label><div class="tab-content docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">textplot_xray</span><span class="p">(</span><span class="n">kw_health</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--32-input--1" name="tab-set--32" type="radio"><label class="tab-label" for="tab-set--32-input--1">Output</label><div class="tab-content docutils container">
<figure class="align-default">
<img alt="../../_images/unnamed-chunk-14-2.png" src="../../_images/unnamed-chunk-14-2.png" />
</figure>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../../machine-learning/">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Machine learning</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../data-analysis/">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Data Analysis</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Ford Fishman
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Text Mining with R</a><ul>
<li><a class="reference internal" href="#setup">Setup</a><ul>
<li><a class="reference internal" href="#install-and-load-packages">Install and load packages</a></li>
<li><a class="reference internal" href="#import-data">Import data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-a-corpus">Create a corpus</a></li>
<li><a class="reference internal" href="#tokenize-the-corpus">Tokenize the corpus</a></li>
<li><a class="reference internal" href="#keywords-in-context">Keywords in context</a></li>
<li><a class="reference internal" href="#select-tokens">Select tokens</a></li>
<li><a class="reference internal" href="#generating-n-grams">Generating n-grams</a></li>
<li><a class="reference internal" href="#collocations">Collocations</a></li>
<li><a class="reference internal" href="#document-feature-matrix">Document feature matrix</a></li>
<li><a class="reference internal" href="#tf-idf-analysis">TF-IDF analysis</a></li>
<li><a class="reference internal" href="#create-a-word-cloud">Create a word cloud</a></li>
<li><a class="reference internal" href="#lexical-diversity">Lexical diversity</a></li>
<li><a class="reference internal" href="#working-with-a-subset">Working with a subset</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=fbdbc327"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../_static/tabs.js?v=3ee01567"></script>
    </body>
</html>